define(["require","exports","../util/Methods"],function(a,b,c){var d=function(){function a(a,b,c,d,e,f,g,h){this.x=a,this.y=b,this.w=c,this.h=d,this.radiusTL=e,this.radiusTR=f,this.radiusBR=g,this.radiusBL=h}return a.prototype.exec=function(a){var b=(j>i?i:j)/2,c=0,d=0,e=0,f=0,g=this.x,h=this.y,i=this.w,j=this.h,k=this.radiusTL,l=this.radiusTR,m=this.radiusBR,n=this.radiusBL;0>k&&(k*=c=-1),k>b&&(k=b),0>l&&(l*=d=-1),l>b&&(l=b),0>m&&(m*=e=-1),m>b&&(m=b),0>n&&(n*=f=-1),n>b&&(n=b),a.moveTo(g+i-l,h),a.arcTo(g+i+l*d,h-l*d,g+i,h+l,l),a.lineTo(g+i,h+j-m),a.arcTo(g+i+m*e,h+j+m*e,g+i-m,h+j,m),a.lineTo(g+n,h+j),a.arcTo(g-n*f,h+j+n*f,g,h+j-n,n),a.lineTo(g,h+k),a.arcTo(g-k*c,h-k*c,g+k,h,k),a.closePath()},a}(),e=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.exec=function(a){a.lineTo(this.x,this.y)},a}(),f=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.exec=function(a){a.moveTo(this.x,this.y)},a}(),g=function(){function a(a,b,c,d,e){this.x1=a,this.y1=b,this.x2=c,this.y2=d,this.radius=e}return a.prototype.exec=function(a){a.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},a}(),h=function(){function a(a,b,c,d,e,f){this.exec=function(a){a.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},this.x=a,this.y=b,this.radius=c,this.startAngle=d,this.endAngle=e,this.anticlockwise=!!f}return a}(),i=function(){function a(a,b,c,d){this.exec=function(a){a.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},this.cpx=a,this.cpy=b,this.x=c,this.y=d}return a}(),j=function(){function a(a,b,c,d,e,f){this.exec=function(a){a.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},this.cp1x=a,this.cp1y=b,this.cp2x=c,this.cp2y=d,this.x=e,this.y=f}return a}(),k=function(){function a(a,b,c,d){this.exec=function(a){a.rect(this.x,this.y,this.w,this.h)},this.x=a,this.y=b,this.w=c,this.h=d}return a}(),l=function(){function a(){this.exec=function(a){a.closePath()}}return a}(),m=function(){function a(){}return a.prototype.exec=function(a){a.beginPath()},a}(),n=function(){function a(a,b){this.path=!1,this.style=a,this.matrix=b}return a.prototype.exec=function(a){if(this.style){a.fillStyle=this.style;var b=this.matrix;b&&(a.save(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)),a.fill(),b&&a.restore()}},a.prototype.linearGradient=function(a,b,c,d,e,f){for(var g=this.style=t._ctx.createLinearGradient(c,d,e,f),h=0,i=a.length;i>h;h++)g.addColorStop(b[h],a[h]);return g.props={colors:a,ratios:b,x0:c,y0:d,x1:e,y1:f,type:"linear"},this},a.prototype.radialGradient=function(a,b,c,d,e,f,g,h){for(var i=this.style=t._ctx.createRadialGradient(c,d,e,f,g,h),j=0,k=a.length;k>j;j++)i.addColorStop(b[j],a[j]);return i.props={colors:a,ratios:b,x0:c,y0:d,r0:e,x1:f,y1:g,r1:h,type:"radial"},this},a.prototype.bitmap=function(a,b){var c=this.style=t._ctx.createPattern(a,"");return c.props={image:a,repetition:b,type:"bitmap"},this},a}(),o=function(){function a(a,b){this.linearGradient=n.prototype.linearGradient,this.radialGradient=n.prototype.radialGradient,this.bitmap=n.prototype.bitmap,this.path=!1,this.style=a,this.ignoreScale=b}return a.prototype.exec=function(a){this.style&&(a.strokeStyle=this.style,this.ignoreScale&&(a.save(),a.setTransform(1,0,0,1,0,0)),a.stroke(),this.ignoreScale&&a.restore())},a}(),p=function(){function a(a,b,c,d){this.path=!1,this.width=a,this.caps=b,this.joints=c,this.miterLimit=d}return a.prototype.exec=function(a){a.lineWidth=null==this.width?"1":this.width,a.lineCap=null==this.caps?"butt":this.caps,a.lineJoin=null==this.joints?"miter":this.joints,a.miterLimit=null==this.miterLimit?"10":this.miterLimit},a}(),q=function(){function a(a,b,c){this.x=a,this.y=b,this.radius=c}return a.prototype.exec=function(a){a.arc(this.x,this.y,this.radius,0,2*Math.PI)},a}(),r=function(){function a(a,b,c,d){this.x=a,this.y=b,this.w=c,this.h=d}return a.prototype.exec=function(a){var b=this.x,c=this.y,d=this.w,e=this.h,f=.5522848,g=d/2*f,h=e/2*f,i=b+d,j=c+e,k=b+d/2,l=c+e/2;a.moveTo(b,l),a.bezierCurveTo(b,l-h,k-g,c,k,c),a.bezierCurveTo(k+g,c,i,l-h,i,l),a.bezierCurveTo(i,l+h,k+g,j,k,j),a.bezierCurveTo(k-g,j,b,l+h,b,l)},a}(),s=function(){function a(a,b,c,d,e,f){this.x=a,this.y=b,this.radius=c,this.sides=d,this.pointSize=e,this.angle=f}return a.prototype.exec=function(a){var b=this.x,c=this.y,d=this.radius,e=(this.angle||0)/180*Math.PI,f=this.sides,g=1-(this.pointSize||0),h=Math.PI/f;a.moveTo(b+Math.cos(e)*d,c+Math.sin(e)*d);for(var i=0;f>i;i++)e+=h,1!=g&&a.lineTo(b+Math.cos(e)*d*g,c+Math.sin(e)*d*g),e+=h,a.lineTo(b+Math.cos(e)*d,c+Math.sin(e)*d);a.closePath()},a}(),t=function(){function a(){this.command=null,this._stroke=null,this._strokeStyle=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=null,this._commitIndex=0,this._activeInstructions=null,this._dirty=!1,this._ctx=a._ctx,this.curveTo=this.quadraticCurveTo,this.drawRect=this.rect,this.mt=this.moveTo,this.lt=this.lineTo,this.at=this.arcTo,this.bt=this.bezierCurveTo,this.qt=this.quadraticCurveTo,this.a=this.arc,this.r=this.rect,this.cp=this.closePath,this.c=this.clear,this.f=this.beginFill,this.lf=this.beginLinearGradientFill,this.rf=this.beginRadialGradientFill,this.bf=this.beginBitmapFill,this.ef=this.endFill,this.ss=this.setStrokeStyle,this.s=this.beginStroke,this.ls=this.beginLinearGradientStroke,this.rs=this.beginRadialGradientStroke,this.bs=this.beginBitmapStroke,this.es=this.endStroke,this.dr=this.drawRect,this.rr=this.drawRoundRect,this.rc=this.drawRoundRectComplex,this.dc=this.drawCircle,this.de=this.drawEllipse,this.dp=this.drawPolyStar,this.p=this.decodePath,this.clear()}return a.getRGB=function(a,b,c,d){return void 0===d&&(d=null),null!=a&&null==c&&(d=b,c=255&a,b=a>>8&255,a=a>>16&255),null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},a.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},a.prototype.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},a.prototype.draw=function(a,b){this._updateInstructions();for(var c=this._instructions,d=0,e=c.length;e>d;d++)c[d].exec(a,b)},a.prototype.drawAsPath=function(a){this._updateInstructions();for(var b,c=this._instructions,d=0,e=c.length;e>d;d++)(b=c[d]).path!==!1&&b.exec(a)},a.prototype.moveTo=function(b,c){return this.append(new a.MoveTo(b,c),!0)},a.prototype.lineTo=function(b,c){return this.append(new a.LineTo(b,c))},a.prototype.arcTo=function(b,c,d,e,f){return this.append(new a.ArcTo(b,c,d,e,f))},a.prototype.arc=function(b,c,d,e,f,g){return this.append(new a.Arc(b,c,d,e,f,g))},a.prototype.quadraticCurveTo=function(b,c,d,e){return this.append(new a.QuadraticCurveTo(b,c,d,e))},a.prototype.bezierCurveTo=function(b,c,d,e,f,g){return this.append(new a.BezierCurveTo(b,c,d,e,f,g))},a.prototype.rect=function(b,c,d,e){return this.append(new a.Rect(b,c,d,e))},a.prototype.closePath=function(){return this._activeInstructions.length?this.append(new a.ClosePath):this},a.prototype.clear=function(){return this._instructions=[],this._activeInstructions=[],this._commitIndex=0,this._strokeStyle=this._stroke=this._fill=null,this._dirty=this._strokeIgnoreScale=!1,this},a.prototype.beginFill=function(b){return this._setFill(b?new a.Fill(b):null)},a.prototype.beginLinearGradientFill=function(b,c,d,e,f,g){return this._setFill((new a.Fill).linearGradient(b,c,d,e,f,g))},a.prototype.beginRadialGradientFill=function(b,c,d,e,f,g,h,i){return this._setFill((new a.Fill).radialGradient(b,c,d,e,f,g,h,i))},a.prototype.beginBitmapFill=function(b,c,d){return void 0===c&&(c="repeat"),this._setFill(new a.Fill(null,d).bitmap(b,c))},a.prototype.endFill=function(){return this.beginFill()},a.prototype.setStrokeStyle=function(b,c,d,e,f){return void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=null),void 0===f&&(f=!1),this._updateInstructions(!0),this._strokeStyle=this.command=new a.StrokeStyle(b,c,d,e),this._stroke&&(this._stroke.ignoreScale=f),this._strokeIgnoreScale=f,this},a.prototype.beginStroke=function(b){return this._setStroke(b?new a.Stroke(b,null):null)},a.prototype.beginLinearGradientStroke=function(b,c,d,e,f,g){return this._setStroke(new a.Stroke(null,null).linearGradient(b,c,d,e,f,g))},a.prototype.beginRadialGradientStroke=function(b,c,d,e,f,g,h,i){return this._setStroke(new a.Stroke(null,null).radialGradient(b,c,d,e,f,g,h,i))},a.prototype.beginBitmapStroke=function(b,c){return this._setStroke(new a.Stroke(null,null).bitmap(b,c))},a.prototype.endStroke=function(){return this.beginStroke(null)},a.prototype.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e)},a.prototype.drawRoundRectComplex=function(b,c,d,e,f,g,h,i){return this.append(new a.RoundRect(b,c,d,e,f,g,h,i))},a.prototype.drawCircle=function(b,c,d){return this.append(new a.Circle(b,c,d))},a.prototype.drawEllipse=function(b,c,d,e){return this.append(new a.Ellipse(b,c,d,e))},a.prototype.drawPolyStar=function(b,c,d,e,f,g){return this.append(new a.PolyStar(b,c,d,e,f,g))},a.prototype.append=function(a,b){return this._activeInstructions.push(a),this.command=a,b||(this._dirty=!0),this},a.prototype.decodePath=function(b){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],d=[2,2,4,6,0],e=0,f=b.length,g=[],h=0,i=0,j=a.BASE_64;f>e;){var k=b.charAt(e),l=j[k],m=l>>3,n=c[m];if(!n||3&l)throw"bad path data (@"+e+"): "+k;var o=d[m];m||(h=i=0),g.length=0,e++;for(var p=(l>>2&1)+2,q=0;o>q;q++){var r=j[b.charAt(e)],s=r>>5?-1:1;r=(31&r)<<6|j[b.charAt(e+1)],3==p&&(r=r<<6|j[b.charAt(e+2)]),r=s*r/10,q%2?h=r+=h:i=r+=i,g[q]=r,e+=p}n.apply(this,g)}return this},a.prototype.getInstructions=function(){return this._updateInstructions(),this._instructions},a.prototype.clone=function(){var b=new a;return b._instructions=this._instructions.slice(),b._activeInstructions=this._activeInstructions.slice(),b._commitIndex=this._commitIndex,b._fill=this._fill,b._stroke=this._stroke,b._strokeStyle=this._strokeStyle,b._dirty=this._dirty,b._strokeIgnoreScale=this._strokeIgnoreScale,b},a.prototype.toString=function(){return"[Graphics]"},a.prototype._updateInstructions=function(b){var c=this._instructions,d=this._activeInstructions,e=this._commitIndex;this._dirty&&d.length&&(c.length=e,c.push(a.beginCmd),c.push.apply(c,d),this._fill&&c.push(this._fill),this._stroke&&this._strokeStyle&&c.push(this._strokeStyle),this._stroke&&c.push(this._stroke),this._dirty=!1),b&&(d.length=0,this._commitIndex=c.length)},a.prototype._setFill=function(a){return this._updateInstructions(!0),(this._fill=a)&&(this.command=a),this},a.prototype._setStroke=function(a){return this._updateInstructions(!0),(this._stroke=a)&&(this.command=a,a.ignoreScale=this._strokeIgnoreScale),this},a.RoundRect=d,a.MoveTo=f,a.LineTo=e,a.ArcTo=g,a.Arc=h,a.QuadraticCurveTo=i,a.BezierCurveTo=j,a.Rect=k,a.ClosePath=l,a.BeginPath=m,a.Fill=n,a.Stroke=o,a.StrokeStyle=p,a.Circle=q,a.Ellipse=r,a.PolyStar=s,a.beginCmd=new m,a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},a.STROKE_CAPS_MAP=["butt","round","square"],a.STROKE_JOINTS_MAP=["miter","round","bevel"],a._canvas=c.createCanvas(),a._ctx=a._canvas.getContext("2d"),a}();return t._canvas.width=t._canvas.height=1,t});
//# sourceMappingURL=../../../../sourcemap/lib/easelts/display/Graphics.js.map