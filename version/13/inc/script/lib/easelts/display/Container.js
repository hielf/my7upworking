var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define(["require","exports","./DisplayObject","../enum/DisplayType","../geom/Size","lib/createts/event/Signal1"],function(a,b,c,d,e,f){var g=function(a){function b(b,c,d,e,f,g){void 0===b&&(b="100%"),void 0===c&&(c="100%"),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),a.call(this,b,c,d,e,f,g),this.type=2,this.children=[],this.mouseChildren=!1,this.tickChildren=!0}return __extends(b,a),Object.defineProperty(b.prototype,"resizeSignal",{get:function(){return this._resizeSignal||(this._resizeSignal=new f),this._resizeSignal},enumerable:!0,configurable:!0}),b.prototype.initialize=function(){this.constructor.call(this)},b.prototype.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&(this.cacheCanvas||this.children.length))},b.prototype.enableMouseInteraction=function(){this.mouseChildren=!0,a.prototype.enableMouseInteraction.call(this)},b.prototype.disableMouseInteraction=function(){this.mouseChildren=!1,a.prototype.disableMouseInteraction.call(this)},b.prototype.draw=function(b,c){if(a.prototype.draw.call(this,b,c))return!0;for(var d,e=this.children,f=0,g=e.length;g>f;f++)d=e[f],d.isVisible()&&(b.save(),d.updateContext(b),d.draw(b),b.restore());return!0},b.prototype.addChild=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=a.length;if(0==c)return null;if(c>1){for(var d=0;c>d;d++)this.addChild(a[d]);return a[c-1]}var f=a[0];return f.parent&&f.parent.removeChild(f),f.parent=this,this._parentSizeIsKnown&&"function"==typeof f.onResize&&f.onResize(new e(this.width,this.height)),this.stage&&(f.stage=this.stage,f.onStageSet&&f.onStageSet.call(f)),this.children.push(f),f},b.prototype.onStageSet=function(){for(var a=this.children,b=0;b<a.length;b++){var c=a[b];c.stage=this.stage,c.onStageSet&&c.onStageSet.call(c)}},b.prototype.addChildAt=function(a,b){return a.parent&&a.parent.removeChild(a),a.parent=this,this._parentSizeIsKnown&&a.onResize(new e(this.width,this.height)),this.stage&&(a.stage=this.stage,a.onStageSet&&a.onStageSet.call(a)),this.children.splice(b,0,a),a},b.prototype.removeChild=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=a.length;if(c>1){for(var d=!0,e=0;c>e;e++)d=d&&this.removeChild(a[e]);return d}return this.removeChildAt(this.children.indexOf(a[0]))},b.prototype.removeChildAt=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=a.length;if(c>1){a.sort(function(a,b){return b-a});for(var d=!0,e=0;c>e;e++)d=d&&this.removeChildAt(a[e]);return d}if(a[0]<0||a[0]>this.children.length-1)return!1;var f=this.children[a[0]];return f&&(f.parent=null),this.children.splice(a[0],1),!0},b.prototype.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null},b.prototype.getChildAt=function(a){return this.children[a]},b.prototype.getChildByName=function(a){for(var b=this.children,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},b.prototype.sortChildren=function(a){this.children.sort(a)},b.prototype.getChildIndex=function(a){return this.children.indexOf(a)},b.prototype.getNumChildren=function(){return this.children.length},b.prototype.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},b.prototype.swapChildren=function(a,b){for(var c,d,e=this.children,f=0,g=e.length;g>f&&(e[f]==a&&(c=f),e[f]==b&&(d=f),null==c||null==d);f++);f!=g&&(e[c]=b,e[d]=a)},b.prototype.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;d>e&&c[e]!=a;e++);e!=d&&e!=b&&(c.splice(e,1),c.splice(b,0,a))}},b.prototype.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},b.prototype.hitTest=function(a,b){return null!=this.getObjectUnderPoint(a,b)},b.prototype.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,c),c},b.prototype.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)},b.prototype.getBounds=function(){return this._getBounds(null,!0)},b.prototype.getTransformedBounds=function(){return this._getBounds(null,!0)},b.prototype.clone=function(a){var c=new b;if(this.cloneProps(c),a)for(var d=c.children=[],e=0,f=this.children.length;f>e;e++){var g=this.children[e].clone(a);g.parent=c,d.push(g)}return c},b.prototype.toString=function(){return"[Container (name="+this.name+")]"},b.prototype.onResize=function(b){a.prototype.onResize.call(this,b);var c=new e(this.width,this.height);this._resizeSignal&&this._resizeSignal.hasListeners()&&this._resizeSignal.emit(c);for(var d=null,f=0;f<this.children.length;f++)d=this.children[f],"function"==typeof d.onResize&&d.onResize(c)},b.prototype.onTick=function(b){if(this.tickChildren)for(var c=this.children,d=c.length-1;d>=0;d--){var e=c[d];e.tickEnabled&&e.onTick(b)}a.prototype.onTick.call(this,b)},b.prototype._getObjectsUnderPoint=function(a,b,d,e,f){var g=c._hitTestContext,h=this._matrix;f=f||e&&this._hasMouseEventListener();for(var i=this.children,j=i.length,k=j-1;k>=0;k--){var l=i[k],m=l.hitArea,n=l.mask;if(l.visible&&(m||l.isVisible())&&(!e||l.mouseEnabled)){if(!m&&n&&n.graphics&&!n.graphics.isEmpty()){var o=n.getMatrix(n._matrix).prependMatrix(this.getConcatenatedMatrix(h));if(g.setTransform(o.a,o.b,o.c,o.d,o.tx-a,o.ty-b),n.graphics.drawAsPath(g),g.fillStyle="#000",g.fill(),!this._testHit(g))continue;g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,2,2)}if(m||2!=l.type){if(e&&!f&&!l._hasMouseEventListener())continue;if(l.getConcatenatedMatrix(h),m&&(h.appendTransform(m.x,m.y,m.scaleX,m.scaleY,m.rotation,m.skewX,m.skewY,m.regX,m.regY),h.alpha=m.alpha),g.globalAlpha=h.alpha,g.setTransform(h.a,h.b,h.c,h.d,h.tx-a,h.ty-b),(m||l).draw(g),!this._testHit(g))continue;if(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,2,2),!d)return e&&!this.mouseChildren?this:l;d.push(l)}else{var p=l._getObjectsUnderPoint(a,b,d,e,f);if(!d&&p)return e&&!this.mouseChildren?this:p}}}return null},b.prototype._getBounds=function(b,c){var d=a.prototype.getBounds.call(this);if(d)return this._transformBounds(d,b,c);var e,f,g,h,i=c?this._matrix.identity():this.getMatrix(this._matrix);b&&i.prependMatrix(b);for(var j=this.children.length,k=0;j>k;k++){var l=this.children[k];if(l.visible&&(d=l._getBounds(i))){var m=d.x,n=d.y,o=m+d.width,p=n+d.height;(e>m||null==e)&&(e=m),(o>f||null==f)&&(f=o),(g>n||null==g)&&(g=n),(p>h||null==h)&&(h=p)}}return null==f?null:this._rectangle.initialize(e,g,f-e,h-g)},b.prototype.destruct=function(){for(var b=0;b<this.children.length;b++)"function"==typeof this.children[b].destruct&&this.children[b].destruct();this.disableMouseInteraction(),this.removeAllChildren(),a.prototype.destruct.call(this)},b}(c);return g});
//# sourceMappingURL=../../../../sourcemap/lib/easelts/display/Container.js.map