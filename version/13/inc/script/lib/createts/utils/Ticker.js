define(["require","exports","../../createts/event/Signal1"],function(a,b,c){var d=function(){function a(){var b=this;this.timingMode=a.TIMINGMODE_RAF,this._paused=!1,this._inited=!1,this._ticks=0,this._interval=50,this._lastTime=0,this._timerId=-1,this.tickSignal=new c(null),this._raf=!0,this._handleSynch=function(){var c=a._getTime();b._timerId=-1,b._setupTick(),c-b._lastTime>=.97*(b._interval-1)&&b._tick()},this._handleRAF=function(){b._timerId=-1,b._setupTick(),b._tick()},this._handleTimeout=function(){b._timerId=-1,b._setupTick(),b._tick()}}return a._getTime=function(){return a.now&&a.now.call(performance)||(new Date).getTime()},a.getInstance=function(){return a._instance||(a._instance=new a),window.tickerInstance=a._instance,a._instance},a.prototype.reset=function(){if(this._raf){var a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;a&&a(this._timerId)}else clearTimeout(this._timerId);this._timerId=null,this._inited=!1},a.prototype.addTickListener=function(a){return this.tickSignal.connect(a,!1)},a.prototype.setInterval=function(a){this._interval=a,this._setupTick()},a.prototype.getInterval=function(){return this._interval},a.prototype.setFPS=function(a){this.setInterval(1e3/a)},a.prototype.getFPS=function(){return 1e3/this._interval},a.prototype.setPaused=function(b){this._paused!=b&&(this._paused=b,b&&(this._lastTime=a._getTime()))},a.prototype.getPaused=function(){return this._paused},a.prototype._setupTick=function(){if(!(this._timerId>-1)){var b=this.timingMode;if(b==a.TIMINGMODE_RAFSYNCHED||b==a.TIMINGMODE_RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return this._timerId=c(b==a.TIMINGMODE_RAF?this._handleRAF:this._handleSynch),void(this._raf=!0)}this._raf=!1,this._timerId=setTimeout(this._handleTimeout,this._interval)}},a.prototype._tick=function(){var b=a._getTime(),c=b-this._lastTime;if(this._lastTime=b,!this._paused&&this.tickSignal.hasListeners()){var d=a.maxDelta,e=d&&c>d?d:c;this.tickSignal.emit(e/a.deltaDivider)}},a.TIMINGMODE_TIMEOUT="timeout",a.TIMINGMODE_RAF="raf",a.TIMINGMODE_RAFSYNCHED="raf_synched",a.now=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow),a._instance=null,a.maxDelta=0,a.deltaDivider=1,a}();return d});
//# sourceMappingURL=../../../../sourcemap/lib/createts/utils/Ticker.js.map