define(["require","exports","./Event"],function(a,b,c){var d=function(){function a(a){this._listeners=null,this._captureListeners=null}return a.initialize=function(b){var c=a.prototype;b.addEventListener=c.addEventListener,b.on=c.on,b.removeEventListener=b.off=c.removeEventListener,b.removeAllEventListeners=c.removeAllEventListeners,b.hasEventListener=c.hasEventListener,b.dispatchEvent=c.dispatchEvent,b._dispatchEvent=c._dispatchEvent,b.willTrigger=c.willTrigger},a.prototype.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},a.prototype.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},a.prototype.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},a.prototype.dispatchEvent=function(a,b){if("string"==typeof a){var d=this._listeners;if(!d||!d[a])return!1;a=new c(a)}try{a.target=b||this}catch(e){}if(a.bubbles&&this.parent){for(var f=this,g=[f];f.parent;)g.push(f=f.parent);var h,i=g.length;for(h=i-1;h>=0&&!a.propagationStopped;h--)g[h]._dispatchEvent(a,1+(0==h?1:h));for(h=1;i>h&&!a.propagationStopped;h++)g[h]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},a.prototype.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},a.prototype.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},a.prototype.toString=function(){return"[EventDispatcher]"},a.prototype._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.removeEventListener(a.type,h,1==b),a.removed=!1)}}},a.prototype.destruct=function(){this.removeAllEventListeners()},a}();return d});
//# sourceMappingURL=../../../../sourcemap/lib/createts/event/EventDispatcher.js.map