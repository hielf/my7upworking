var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define(["require","exports","lib/temple/events/EventDispatcher","lib/temple/events/BaseEvent"],function(a,b,c,d){var e=function(a){function b(){a.call(this),this._asciChars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._fallbackFonts=["serif","sans-serif","monospace","cursive","fantasy"],this._fontSpan={},this._fontLoaded={},this.div=document.createElement("div");var b=document.body,c=document.body.firstChild;this.div.id="fontdetectHelper",b.insertBefore(this.div,c),this.div.style.position="absolute",this.div.style.visibility="hidden",this.div.style.top="-200px",this.div.style.left="-100000px",this.div.style.width="100000px",this.div.style.height="200px",this.div.style.fontSize="100px"}return __extends(b,a),b.getInstance=function(){return b._instance||(b._instance=new b),b._instance},b.prototype.addSpan=function(a){a.innerText=this._asciChars,this.div.appendChild(a)},b.prototype.isFontLoaded=function(a,b){var c=this;if(this._fontLoaded[a])return void b();if(this.hasEventListener(a))return void this.addEventListener(a,b,0,!0);this.addEventListener(a,b,0,!0);var e=document.createElement("span");this._fontSpan[a]=e,this.addSpan(e);var f=2e3,g=(new Date).getTime(),h=setInterval(function(){if(c.check(a,e))return c._fontLoaded[a]=!0,clearInterval(h),void c.dispatchEvent(new d(a));var b=(new Date).getTime();b-g>f&&clearInterval(h)},50)},b.prototype.check=function(a,b){for(var c=0,d=0,e=0;e<this._fallbackFonts.length;++e){if(b.style.fontFamily=a+","+this._fallbackFonts[e],c=b.offsetWidth,e>0&&c!=d)return!1;d=c}return!0},b._instance=null,b}(c);return e});
//# sourceMappingURL=../../../../sourcemap/lib/temple/utils/FontDetect.js.map