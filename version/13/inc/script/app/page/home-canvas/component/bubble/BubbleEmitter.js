var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define(["require","exports","lib/easelts/display/Container","./config/BubbleConfig","lib/createts/utils/Ticker"],function(a,b,c,d,e){var f=function(a){function b(b,c,e,f){void 0===c&&(c=.02),a.call(this,0,0),this._emitChance=.02,this._emitChanceMultiplier=1,this._vxMultiplier=1,this._vyMultiplier=1,this._bubbles=[],this._emitDuration=-1,this._isEmitting=!1,this._isUpdating=!1,this.useAutoUpdate=!0,this._pool=b,this._emitChance=c,this._target=f||this,this._bubbleConfig=e||new d}return __extends(b,a),b.prototype.startEmitting=function(a){this._emitDuration=void 0!==a?a:-1,this._isEmitting=!0,this.addBubble()},b.prototype.stopEmitting=function(){this._isEmitting=!1},b.prototype.startUpdating=function(){this._tickSignalConnection||(this._isUpdating=!0,this._tickSignalConnection=e.getInstance().tickSignal.connect(this.update.bind(this)))},b.prototype.stopUpdating=function(){this._tickSignalConnection&&(this._tickSignalConnection.dispose(),this._tickSignalConnection=null,this._isUpdating=!1)},b.prototype.burst=function(a){for(var b=0;a>b;b++)this.addBubble()},b.prototype.boost=function(a){var b=this;this._vxMultiplier=5,this._vyMultiplier=5,this._emitChanceMultiplier=75,TweenMax.delayedCall(a,function(){b._vxMultiplier=1,b._vyMultiplier=1,b._emitChanceMultiplier=1})},b.prototype.update=function(a){this._isEmitting&&Math.random()<this._emitChance*this._emitChanceMultiplier*a&&this.addBubble();for(var b=this._bubbles.length-1;b>=0;b--){var c=this._bubbles[b];c.isAlive?c.update(a):this.removeBubble(c)}-1!=this._emitDuration&&(this._emitDuration-=a*e.deltaDivider,this._emitDuration<=0&&(this.stopEmitting(),this._emitDuration=-1))},b.prototype.addBubble=function(){var a=this._pool.checkOut();return a.setConfig(this._bubbleConfig),a.reset(),a.x=Math.random()*this.width-.5*this.width,a.y=Math.random()*this.height-.5*this.height,a.vx*=this._vxMultiplier,a.vy*=this._vyMultiplier,this._target.addChild(a),this._target!=this&&(a.x+=this.x,a.y+=this.y),this._bubbles.push(a),this.useAutoUpdate&&!this._isUpdating&&this.startUpdating(),a},b.prototype.removeBubble=function(a){this._target.removeChild(a),this._bubbles.splice(this._bubbles.indexOf(a),1),this._pool.checkIn(a),this.useAutoUpdate&&!this._isEmitting&&0==this._bubbles.length&&this.stopUpdating()},b.prototype.destruct=function(){this.stopUpdating(),a.prototype.destruct.call(this)},b}(c);return f});
//# sourceMappingURL=../../../../../../sourcemap/app/page/home-canvas/component/bubble/BubbleEmitter.js.map