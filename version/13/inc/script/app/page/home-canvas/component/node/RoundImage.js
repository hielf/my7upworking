var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define(["require","exports","lib/easelts/display/Container","lib/easelts/display/Bitmap","lib/easelts/display/Shape","lib/createts/event/Event","lib/createts/utils/Ticker"],function(a,b,c,d,e,f,g){var h=function(a){function b(c,f,h){var i=this;void 0===h&&(h=!1),a.call(this,f,f),this.isLoaded=!1,this.createRounded=function(){i._image.removeEventListener(d.EVENT_ONLOAD,i.createRounded),g.getInstance().tickSignal.connect(function(){return i.createRoundedImpl()}).once()},this._imageSize=f-2*b._STROKE_SIZE,this._isFeatured=h,this._image=new d(c,null,null,0,0,"50%","50%"),this._mask=new e,this._mask.graphics.beginFill("#f00").drawCircle(0,0,.5*this._imageSize),this._mask.compositeOperation="destination-in",this.hitArea=this._mask,this._image.loaded?this.createRounded():this._image.addEventListener(d.EVENT_ONLOAD,this.createRounded)}return __extends(b,a),b.prototype.createRoundedImpl=function(){this.isLoaded=!0;var a=Math.max(this._imageSize/this._image.width,this._imageSize/this._image.height);this._image.scaleX=a,this._image.scaleY=a,this.addChild(this._image),this.addChild(this._mask),this.cache(.5*-this.width,.5*-this.height,this.width,this.height,2),this.removeAllChildren(),this._image.destruct(),this._image=null,this._mask.destruct(),this._mask=null;var c=new e;c.graphics.beginFill("#ffffff").drawCircle(0,0,.5*this._imageSize+b._STROKE_SIZE),this.addChild(c);var g=new d(this.cacheCanvas,2*this.width,2*this.height,0,0,"50%","50%");if(g.scaleX=g.scaleY=.5,this.addChild(g),this._isFeatured){var h=new e;h.graphics.setStrokeStyle(3).beginStroke("#f6e001").drawCircle(0,0,.5*this._imageSize-1),this.addChild(h)}this.uncache(),this.cache(.5*-this.width-1,.5*-this.height-1,this.width+2,this.height+2,2),this.removeAllChildren(),this.dispatchEvent(new f(b.EVENT_LOAD_COMPLETE))},b.EVENT_LOAD_COMPLETE="RoundImage.EVENT_LOAD_COMPLETE",b._STROKE_SIZE=5,b}(c);return h});
//# sourceMappingURL=../../../../../../sourcemap/app/page/home-canvas/component/node/RoundImage.js.map