var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define(["require","exports","../../../../../lib/easelts/display/Container","lib/easelts/display/Bitmap","app/data/DataManager"],function(a,b,c,d,e){var f=function(a){function b(b,d,e,f,g,h){void 0===b&&(b="100%"),void 0===d&&(d="100%"),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),a.call(this,b,d,e,f,g,h),this._TILE_SIZE=100,this._TILE_MARGIN=8,this._NUM_TILES=3,this._NUM_BUBBLES_PER_TILE=17,this._tiles=[],this._bubbleLayers=[],this.bubbleLayerContainer=new c,this.addChild(this.bubbleLayerContainer)}return __extends(b,a),b.prototype.addBubbleLayers=function(a,b,e){void 0===a&&(a=0),b||(b=this.width+80),e||(e=1.5*this.height),0==this._tiles.length&&this.createTiles(this._NUM_BUBBLES_PER_TILE);var f=this._TILE_SIZE,g=Math.ceil(b/(f-this._TILE_MARGIN)),h=Math.ceil(e/(f-this._TILE_MARGIN)),i=g*f-(g-1)*this._TILE_MARGIN,j=h*f-(h-1)*this._TILE_MARGIN,k=new c(i,f);this.createTiledMap(k,g,h),k.cache(0,0,i,j);var l=new d(k.cacheCanvas);k.uncache();var m=l.clone();m.scaleX=-1,m.x=m.width,k.addChild(m),this.createTiledMap(k,g,h),k.cache(0,0,i,j);var n=new d(k.cacheCanvas);k.uncache();var o=n.clone();o.scaleY=-1,o.y=o.height,k.addChild(o),this.createTiledMap(k,g,h),k.cache(0,0,i,j);var p=new d(k.cacheCanvas);k.uncache(),k.destruct(),this.addLayerBitmap(l),this.addLayerBitmap(n),this.addLayerBitmap(p);for(var q=0;a>q;q++)this.addLayerBitmap(p.clone())},b.prototype.createTiledMap=function(a,b,c){for(var d=this._TILE_SIZE,e=.5*d,f=0;c>f;f++)for(var g=0;b>g;g++){var h=this._tiles[Math.floor(Math.random()*this._tiles.length)];h.rotation+=90;var i=h.clone();i.x=e+g*d-g*this._TILE_MARGIN,i.y=e+f*d-f*this._TILE_MARGIN,a.addChild(i)}},b.prototype.createTiles=function(a){for(var b=e.getInstance().smallBubblePool,f=new c(this._TILE_SIZE,this._TILE_SIZE,0,0,"50%","50%"),g=0;a>g;g++){var h=b.checkOut();f.addChild(h)}for(var i=0;i<this._NUM_TILES;i++){for(var g=0;a>g;g++){var h=f.getChildAt(g);h.x=h.width+Math.random()*(f.width-2*h.width),h.y=h.height+Math.random()*(f.height-2*h.height)}f.cache(0,0,f.width,f.height);var j=new d(f.cacheCanvas,f.width,f.height,0,0,.5*f.width,.5*f.height);f.uncache(),this._tiles.push(j)}for(var g=0;a>g;g++){var h=f.getChildAt(g);b.checkIn(h)}f.destruct()},b.prototype.addLayerBitmap=function(a){a.setGeomTransform(a.width,a.height,.5*a.width,this.height,.5*a.width,0),this.bubbleLayerContainer.addChild(a),this._bubbleLayers.push(a)},b}(c);return f});
//# sourceMappingURL=../../../../../../sourcemap/app/page/home-canvas/component/bubble/AbstractBubbleLayerContainer.js.map